repos:
  - repo: https://github.com/psf/black
    rev: 25.1.0
    hooks:
      - id: black

  - repo: https://github.com/pycqa/isort
    rev: 6.0.1
    hooks:
      - id: isort

  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.7.1
    hooks:
      - id: mypy
        # Until better package management implemented, remember to keep these
        # in sync with requirements.txt
        additional_dependencies:
          - "types-pyYAML"
          - "types-requests"
          - "types-tqdm"
        args: ["--config-file=pyproject.toml"]

  - repo: local
    hooks:
      - id: pytest-check
        name: pytest-fast-checks
        # Run only unit tests, skip slow and integration tests
        entry: python -m pytest tests/ -v -m "unit and not slow and not integration" --maxfail=2
        language: python
        additional_dependencies:
          - "pytest>=7.0.0"
          - "pytest-mock"
          - "pytest-cov"
          - "pydub>=0.25.1"
          - "elevenlabs>=0.3.0"
          - "pdfplumber>=0.10.3"
          - "PyYAML>=6.0.1"
          - "ruamel.yaml>=0.17.21"
          - "unidecode"
          - "openai"
          - "zyphra"
          - "eyeD3"
          - "tqdm"
        pass_filenames: false
        always_run: false
        types: [python]
